{% extends "base.html" %}
{% block content %}
<section class="max-w-3xl mx-auto px-4 mt-10">

  <!-- Header -->
  <div class="relative mb-6 flex flex-col items-center">
    <div class="h-20 w-20 rounded-full ring-1 ring-zinc-700 shadow-xl glass">
      <img src="{{ url_for('static', filename='images/rutgers_mascot.png') }}"
           class="h-full w-full rounded-full object-cover mascot-avatar" alt="Mascot"/>
    </div>
    <div class="mt-2 text-xl font-extrabold leading-none text-center">
      <span class="text-white">Scarlet</span>
      <span class="text-[var(--accent)]">Agent</span>
    </div>
  </div>

  <!-- Chat area -->
  <div id="chatWrap" class="relative">
    <div id="pullHint" class="pull-hint">Pull to see previous chatâ€¦</div>
    <div id="chat" class="chat-box glass"></div>
  </div>

  <!-- Composer -->
  <form id="msgForm" class="sticky bottom-0 mt-4" onsubmit="return false">
    <div class="composer glass">

      <!-- Scarlet Call Button -->
      <button id="callBtn" type="button" class="composer-btn call-btn-red" title="Start Call">
        <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8"
             stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.8 19.8 0 0 1-8.63-3.07A19.5 19.5 0 0 1 3.15 8.81 19.8 19.8 0 0 1 .08 0.18 2 2 0 0 1 2.06 0h3a2 2 0 0 1 2 1.72 12.05 12.05 0 0 0 .65 2.73 2 2 0 0 1-.45 2.11L6.1 8.9a16 16 0 0 0 9 9l2.34-1.16a2 2 0 0 1 2.11.45 12.05 12.05 0 0 0 2.73.65A2 2 0 0 1 22 16.92z"/>
        </svg>
      </button>

      <!-- Input -->
      <div class="input-wrap">
        <input id="msgInput" placeholder="Type your message..." required class="input-pill">
      </div>

      <!-- Send -->
      <button id="sendBtn" class="send-fab" title="Send">
        <svg viewBox="0 0 24 24" class="h-5 w-5" fill="none" stroke="currentColor" stroke-width="1.8"
             stroke-linecap="round" stroke-linejoin="round">
          <path d="M22 2 11 13"/>
          <path d="M22 2 15 22l-4-9-9-4 20-7z"/>
        </svg>
      </button>
    </div>
  </form>
</section>

<!-- JS -->
<script src="{{ url_for('static', filename='js/chat.js') }}"></script>
<script>
  document.getElementById('callBtn')?.addEventListener('click', () => {
    alert('Voice call feature coming soon!');
  });
</script>
{% endblock %}